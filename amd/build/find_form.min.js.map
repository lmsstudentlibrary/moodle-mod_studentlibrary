{"version":3,"file":"find_form.min.js","sources":["../src/find_form.js"],"sourcesContent":["import $ from 'jquery';\n// import ModalConstructor from \"./modal_constructor\";\n// import CustomEvents from 'core/custom_interaction_events';\n\nexport const init = (\n    serverapi\n    , kits_select\n    , div_select\n    , headerContent\n    , search_button\n    , add_button\n    , search_bar\n    , lang\n) => {\n    $('#search_button').on(\"click\", function () {\n        // Удаляем артефакты\n        let dialogDom = document.getElementsByClassName('search-book-dialogue');\n        for (let i = 0; i < dialogDom.length; i++) {\n            if (dialogDom[i].getAttribute('aria-hidden') == 'true') {\n                dialogDom[i].remove();\n            }\n        }\n        const ssr = this.getAttribute(\"ssr_p\");\n        const pagination = 6;\n        let content;\n        content = Y.Node.create(\n            '<div class = \"book-dialog\" id = \"book-dialog\">' +\n            '<div class=\"book-search-form\" id=\"book-search-form\"><div class=\"book_search_form_filter\" id=\"book_search_form_filter\"></div></div>' +\n            '<hr />' +\n            '<div class=\"book-search-list\" id=\"book-search-list\"></div>' +\n            '<div class=\"book-pagination\" id=\"book-pagination\"></div>' +\n            '<hr />' +\n            '<div class=\"book_button\" id=\"book_button\" align=\"center\"></div>' +\n            '</div>'\n        );\n        let search_form = content.one('#book-search-form');\n        let search_form_filter = content.one('#book_search_form_filter');\n        let book_button = content.one('#book_button');\n        /**\n        * kitsSelect\n        */\n        let kitsSelect = Y.Node.create('<div><p>' + kits_select + '</p><select id=\"kits_select\" class=\"kits_select custom-select\"></select></div>');\n        let kitsSelectOne = kitsSelect.one('#kits_select');\n        const kitsURL = serverapi + \"db?SSr=\" + ssr + \"&guide=sengine&cmd=sel&tag=all_agreement_kits\";\n        // window.console.log(kitsURL);\n        let kitsHttp = new XMLHttpRequest();\n        kitsHttp.open(\"GET\", kitsURL, false); // false for synchronous request\n        kitsHttp.send(null);\n        const kitsXmlDoc = convertStringToXML(kitsHttp.responseText);\n        const kitsArray = kitsXmlDoc.getElementsByTagName('kit');\n        let divSelect = Y.Node.create('<div><p>' + div_select + '</p><select id=\"div_select\" class=\"div_select custom-select\"></select></div>');\n        let divSelectOne = divSelect.one('#div_select');\n        for (let i = 0; i < kitsArray.length; i++) {\n            let option = document.createElement(\"option\");\n            option.value = kitsArray[i].getAttribute('id');\n            let KitDataList = GetKitData(serverapi, ssr, kitsArray[i].getAttribute('id'));\n            // window.console.log(lang);\n            // window.console.log( kitsArray[i].getAttribute('id'));\n            const divArray = KitDataList.getElementsByTagName('division');\n            if (i == 0) {\n                for (let j = 0; j < divArray.length; j++) {\n                    let option = document.createElement(\"option\");\n                    option.value = divArray[j].getAttribute('id');\n                    let divData = GetDivFullName(serverapi, ssr, divArray[j].getAttribute('id'), lang);\n                    option.text = divData;\n                    divSelectOne.appendChild(option);\n                }\n            }\n            option.text = KitDataList.getElementsByTagName('name')[0].getElementsByTagName('string')[0].innerHTML;\n            kitsSelectOne.appendChild(option);\n        }\n        search_form_filter.appendChild(kitsSelect);\n        search_form_filter.appendChild(divSelect);\n        let add_button_kit = 'Добавить ссылку на комплект';\n        let addkit = Y.Node.create('<button class=\"btn btn-primary addbook\" name=\"submitbutton_kit\" id=\"id_submitbutton_lit\">' + add_button_kit + '</button>');\n        addkit.on('click', function () {\n            const kits_select = document.getElementById('kits_select');\n            if (kits_select) {\n                document.getElementById('id_booke').value = 'switch_kit/' + kits_select.value;\n                dialogRef.dialog.destroy();\n            } else {\n                window.console.log('no book selected');\n            }\n        });\n        search_form_filter.appendChild(addkit);\n        let input_book_search = Y.Node.create(\n            '<div><p>' + search_bar + '</p><input type=\"text\" id=\"input_book_search\" class=\"input_book_search custom-select\" placeholder=\"Реанимация, Пропедевтика\"></div>'\n        );\n        search_form.appendChild(input_book_search);\n        let button_book_search = Y.Node.create('<button type=\"button\" id=\"button_book_search\" class=\"button_book_search btn btn-outline-primary\">' + search_button + '</button>');\n        button_book_search.on('click', function () {\n            let search_input = document.getElementById('input_book_search').value;\n            const div_select = document.getElementById('div_select').value;\n            let book_search_list = document.getElementById(\"book-search-list\");\n            book_search_list.innerHTML = '';\n            const searchURL = serverapi + 'db?SSr=' + ssr + '&cmd=sel&guide=sengine&tag=kwords_search&paginate=' + pagination + '&div=' + div_select + '&kwords=\"' + search_input + '\"';\n            // window.console.log(searchURL);\n            let xmlHttp = new XMLHttpRequest();\n            xmlHttp.open(\"GET\", searchURL, false); // false for synchronous request\n            xmlHttp.send(null);\n            BuildBooksList(serverapi, ssr, xmlHttp.responseText, pagination, serverapi);\n        });\n        let addbook = Y.Node.create('<button class=\"btn btn-primary addbook\" name=\"submitbutton_book\" id=\"id_submitbutton_book\">' + add_button + '</button>');\n        addbook.on('click', function () {\n            const BookData = document.querySelector('input[name=radio-card-input]:checked');\n            if (BookData) {\n                document.getElementById('id_booke').value = BookData.value;\n                dialogRef.dialog.destroy();\n            } else {\n                window.console.log('no book selected');\n            }\n        });\n        book_button.appendChild(addbook);\n        kitsSelectOne.on('change', function () {\n            const selectKit = document.getElementById('kits_select').value;\n            let divSelectOne = document.getElementById('div_select');\n            divSelectOne.innerHTML = '';\n            let DivList = GetKitData(serverapi, ssr, selectKit);\n            const divArray = DivList.getElementsByTagName('division');\n            for (let j = 0; j < divArray.length; j++) {\n                let option = document.createElement(\"option\");\n                option.value = divArray[j].getAttribute('id');\n                let divData = GetDivFullName(serverapi, ssr, divArray[j].getAttribute('id'), lang);\n                option.text = divData;\n                divSelectOne.appendChild(option);\n            }\n        });\n        search_form.appendChild(button_book_search);\n        let dialogRef = { dialog: null };\n        let config = {\n            headerContent: headerContent,\n            bodyContent: content,\n            additionalBaseClass: 'search-book-dialogue',\n            draggable: true,\n            modal: true,\n            closeButton: true,\n            width: '50%'\n        };\n        dialogRef.dialog = new M.core.dialogue(config);\n        dialogRef.dialog.show();\n    });\n    $('#id_booke').on(\"change\", function () {\n        // window.console.log('change');\n        const ssr = this.getAttribute(\"ssr_o\");\n        const id_error_booke = document.getElementById(\"id_error_booke\");\n        id_error_booke.innerHTML = '';\n        id_error_booke.style.display = \"none\";\n        let book_id_text = this.value;\n        if (book_id_text.indexOf('/doc/') >= 0) {\n            const BookID = FainfBookId(book_id_text, book_id_text.indexOf('/doc/') + 1, book_id_text.indexOf('.html'));\n            this.value = BookID;\n            if (GetBookData(serverapi, ssr, BookID)) {\n                window.console.log('book_id ok');\n            } else {\n                window.console.log('book_id no');\n                id_error_booke.innerHTML = 'Такой идентификатор не найден';\n                id_error_booke.style.display = \"block\";\n            }\n        } else if (book_id_text.indexOf('/book/') >= 0) {\n            const BookID = FainfBookId(book_id_text, book_id_text.indexOf('/book/') + 1, book_id_text.indexOf('.html'));\n            this.value = BookID;\n            if (GetBookData(serverapi, ssr, BookID)) {\n                window.console.log('book_id ok');\n            } else {\n                window.console.log('book_id no');\n                id_error_booke.innerHTML = 'Такой идентификатор не найден';\n                id_error_booke.style.display = \"block\";\n            }\n        } else if (book_id_text.indexOf('doc/') === 0) {\n            const BookID = FainfBookId(book_id_text, 0, book_id_text.indexOf('.html'));\n            this.value = BookID;\n            if (GetBookData(serverapi, ssr, BookID)) {\n                window.console.log('book_id ok');\n            } else {\n                window.console.log('book_id no');\n                id_error_booke.innerHTML = 'Такой идентификатор не найден';\n                id_error_booke.style.display = \"block\";\n            }\n        } else if (book_id_text.indexOf('book/') === 0) {\n            const BookID = FainfBookId(book_id_text, 0, book_id_text.indexOf('.html'));\n            this.value = BookID;\n            if (GetBookData(serverapi, ssr, BookID)) {\n                window.console.log('book_id ok');\n            } else {\n                window.console.log('book_id no');\n                id_error_booke.innerHTML = 'Такой идентификатор не найден';\n                id_error_booke.style.display = \"block\";\n            }\n        } else {\n            id_error_booke.innerHTML = 'Не верный идентификатор книги';\n            id_error_booke.style.display = \"block\";\n        }\n    });\n};\n\nconst FainfBookId = function (str, text_s, test_f) {\n    let new_text_s = text_s;\n    let new_text_f = test_f;\n    if (test_f === -1) {\n        new_text_f = str.length;\n    }\n    return (str.substring(new_text_s, new_text_f));\n};\n\nconst cardclick = (book_id) => {\n    unclickRadio();\n    removeActive();\n    makeActive(book_id);\n    clickRadio(book_id);\n};\n\nconst unclickRadio = () => {\n    $(\"input:radio\").prop(\"checked\", false);\n};\n\nconst clickRadio = (inputElement) => {\n    $(\"#\" + inputElement).prop(\"checked\", true);\n};\n\nconst removeActive = () => {\n    $(\".card\").removeClass(\"active\");\n};\nconst makeActive = (element) => {\n    // window.console.log(element);\n    $(\"#\" + element + \"-card\").addClass(\"active\");\n    // document.getElementById(element).ch\n};\n\nconst convertStringToXML = (xmlString) => {\n    const parser = new DOMParser();\n    const xmlDoc = parser.parseFromString(xmlString, \"text/xml\");\n    return xmlDoc;\n};\n\nconst GetKitData = (server, ssr, selectKit) => {\n    const divURL = server + 'db?SSr=' + ssr + '&guide=sengine&cmd=sel&tag=kit_content&kit=' + selectKit;\n    let xmlHttp = new XMLHttpRequest();\n    // window.console.log(divURL);\n    xmlHttp.open(\"GET\", divURL, false); // false for synchronous request\n    xmlHttp.send(null);\n    return (convertStringToXML(xmlHttp.responseText));\n};\n\nconst GetDivFullName = (server, ssr, divID, page = 0, leng) => {\n    let divDataURL = server + 'db?SSr=' + ssr + '&guide=sengine&cmd=sel&tag=division_books&div=' + divID;\n    if (page !== 0) {\n        divDataURL = divDataURL + '&paginate=' + page;\n    } else {\n        divDataURL = divDataURL + '&paginate=1';\n    }\n    let xmlHttp = new XMLHttpRequest();\n    // window.console.log(leng);\n    xmlHttp.open(\"GET\", divDataURL, false); // false for synchronous request\n    xmlHttp.send(null);\n    const divData = convertStringToXML(xmlHttp.responseText);\n    const full_name_list = divData.getElementsByTagName('full_name');\n    if (full_name_list.length > 0) {\n        const divName_stringlist = full_name_list[0].querySelector(`[language=\"${leng}\"]`);\n        if (divName_stringlist !== null) {\n            return divName_stringlist.innerHTML;\n        } else {\n            return full_name_list[0].getElementsByTagName('string')[0].innerHTML;\n        }\n    } else {\n        return divID;\n    }\n};\n\nconst BuildBooksList = (server, ssr, xmlString, pagination, serverapi, book_total = -1, res_id = -1) => {\n    let book_search_list = document.getElementById(\"book-search-list\");\n    let book_pagination = document.getElementById(\"book-pagination\");\n    book_search_list.innerHTML = '';\n    book_pagination.innerHTML = '';\n    let xmlDoc = convertStringToXML(xmlString);\n    let bookList = xmlDoc.getElementsByTagName('data');\n    if (res_id === -1) {\n        res_id = xmlDoc.getElementsByTagName('res_id')[0].innerHTML;\n    }\n    if (book_total === -1) {\n        book_total = xmlDoc.getElementsByTagName('total')[0].innerHTML;\n    }\n    let page = document.getElementById('book-pagination').getAttribute('page');\n    if (page === null) {\n        page = 1;\n    }\n    if (bookList.length > 0) {\n        for (let i = 0; i < bookList.length; i++) {\n            let BookID = bookList[i].innerHTML;\n            // window.console.log(BookID);\n            if (BookID.split('/')[0] === 'book') {\n                let Book = BuildBook(server, ssr, BookID);\n                book_search_list.appendChild(Book);\n            } else if (BookID.split('/')[0] === 'doc') {\n                let Book = BuildDoc(server, ssr, BookID);\n                book_search_list.appendChild(Book);\n            }\n        }\n        const navBar = BuildBookPagination(res_id, ssr, pagination, book_total, page, serverapi);\n        book_pagination.appendChild(navBar);\n    } else {\n        const notFaund_div = document.createElement('div');\n        const notFaund_p = document.createElement('p');\n        notFaund_p.innerText = 'Not Found';\n        notFaund_div.appendChild(notFaund_p);\n        book_search_list.appendChild(notFaund_div);\n    }\n};\n\nconst BuildBook = (server, ssr, BookID) => {\n    let GetBookDataURL = server + 'db?SSr=' + ssr + '&guide=' + BookID.split('/')[0] + '&cmd=data&id=' + BookID.split('/')[1] + '&img_src_form=b64';\n    let xmlHttp = new XMLHttpRequest();\n    // window.console.log(GetBookDataURL);\n    xmlHttp.open(\"GET\", GetBookDataURL, false); // false for synchronous request\n    xmlHttp.send(null);\n    let BookData = convertStringToXML(xmlHttp.responseText);\n    let meta = BookData.getElementsByTagName('meta')[0];\n    // Макет\n    const book_list_item = '<label class=\"radio-card\"><input type=\"radio\" name=\"radio-card-input\" class=\"radio-card-input\"/><div class=\"card-content-wrapper\"><span class=\"check-icon\"></span><div class=\"card-content\"><img></img><div class=\"metadata\"><div class=\"title\"></div><div class=\"authors\"></div><div class=\"doc_name\"></div></div></div></div></label>';\n    let div_book_list_item = document.createElement('div');\n    div_book_list_item.innerHTML = book_list_item;\n    // ENDМакет\n    let radio_card = div_book_list_item.getElementsByClassName('radio-card')[0];\n    radio_card.setAttribute('for', BookID.split('/')[1]);\n    div_book_list_item.getElementsByClassName('radio-card-input')[0].setAttribute('id', BookID.split('/')[1]);\n    // Название\n    // window.console.log(BookData.getElementsByTagName('title')[0].getElementsByTagName('string'));\n    if (BookData.getElementsByTagName('title')[0].getElementsByTagName('string').length > 0) {\n        div_book_list_item.getElementsByClassName('title')[0].innerHTML = ReplaceCDATA(BookData.getElementsByTagName('title')[0].getElementsByTagName('string')[0].innerHTML);\n    }\n    // Авторы\n    if (meta.querySelectorAll('[name=\"authors\"]')[0].getElementsByTagName('string').length > 0) {\n        div_book_list_item.getElementsByClassName('authors')[0].innerHTML = ReplaceCDATA(meta.querySelectorAll('[name=\"authors\"]')[0].getElementsByTagName('string')[0].innerHTML);\n    }\n    // Выбранная книга\n    div_book_list_item.getElementsByClassName('radio-card-input')[0].value = BookID;\n    div_book_list_item.getElementsByClassName(\"radio-card\")[0].onclick = function () {\n        cardclick(BookID.split('/')[1]);\n    };\n    // Аватар https://www.studentlibrary.ru/cache/book/ISBN5225046746/-1-avatar.jpg\n    // div_book_list_item.getElementsByTagName('img')[0].setAttribute('src', 'https://www.studentlibrary.ru/cache/book/' + BookID.split('/')[1] + '/-1-avatar.jpg');\n    div_book_list_item.getElementsByTagName('img')[0].setAttribute('src', BookData.getElementById(\"avatar\").getAttribute(\"src\"));\n    return div_book_list_item;\n};\n\nconst BuildDoc = (server, ssr, BookID) => {\n    // window.console.log(BookID);\n    let NewBookID = GetBookIdbyDocId(server, ssr, BookID);\n    if (NewBookID !== null) {\n        // window.console.log(NewBookID);\n        let GetBookDataURL = server + 'db?SSr=' + ssr + '&guide=book&cmd=data&id=' + NewBookID + '&img_src_form=b64';\n        let xmlHttp = new XMLHttpRequest();\n        // window.console.log(GetBookDataURL);\n        xmlHttp.open(\"GET\", GetBookDataURL, false); // false for synchronous request\n        xmlHttp.send(null);\n        let BookData = convertStringToXML(xmlHttp.responseText);\n        // window.console.log(BookData.getElementsByTagName('meta'));\n        if (BookData.getElementsByTagName('meta').length > 0) {\n            let meta = BookData.getElementsByTagName('meta')[0];\n            // Макет\n            const book_list_item = '<label class=\"radio-card\"><input type=\"radio\" name=\"radio-card-input\" class=\"radio-card-input\"/><div class=\"card-content-wrapper\"><span class=\"check-icon\"></span><div class=\"card-content\"><img></img><div class=\"metadata\"><div class=\"doc_name\"></div><div class=\"title\"></div><div class=\"authors\"></div></div></div></div></label>';\n            let div_book_list_item = document.createElement('div');\n            div_book_list_item.innerHTML = book_list_item;\n            // ENDМакет\n            let radio_card = div_book_list_item.getElementsByClassName('radio-card')[0];\n            radio_card.setAttribute('for', BookID.split('/')[1] + '_' + BookID.split('/')[2]);\n            div_book_list_item.getElementsByClassName('radio-card-input')[0].setAttribute('id', BookID.split('/')[1] + '_' + BookID.split('/')[2]);\n            // Название\n            if (BookData.getElementsByTagName('title')[0].getElementsByTagName('string').length > 0) {\n                div_book_list_item.getElementsByClassName('title')[0].innerHTML = ReplaceCDATA(BookData.getElementsByTagName('title')[0].getElementsByTagName('string')[0].innerHTML);\n            }\n            // Глава\n            if (BookID.split('/')[2]) {\n                div_book_list_item.getElementsByClassName('doc_name')[0].innerHTML = ReplaceCDATA(BookData.getElementById(BookID.split('/')[1]).getElementsByTagName('string')[0].innerHTML) + ' стр. ' + BookID.split('/')[2];\n            } else {\n                div_book_list_item.getElementsByClassName('doc_name')[0].innerHTML = ReplaceCDATA(BookData.getElementById(BookID.split('/')[1]).getElementsByTagName('string')[0].innerHTML);\n            }\n            // Авторы\n            if (meta.querySelectorAll('[name=\"authors\"]')[0].getElementsByTagName('string').length > 0) {\n                div_book_list_item.getElementsByClassName('authors')[0].innerHTML = ReplaceCDATA(meta.querySelectorAll('[name=\"authors\"]')[0].getElementsByTagName('string')[0].innerHTML);\n            }\n            // Выбранная книга\n            div_book_list_item.getElementsByClassName('radio-card-input')[0].value = BookID;\n            div_book_list_item.getElementsByClassName(\"radio-card\")[0].onclick = function () {\n                cardclick(BookID.split('/')[1] + '_' + BookID.split('/')[2]);\n            };\n            // Аватар https://www.studentlibrary.ru/cache/book/ISBN5225046746/-1-avatar.jpg\n            div_book_list_item.getElementsByTagName('img')[0].setAttribute('src', BookData.getElementById(\"avatar\").getAttribute(\"src\"));\n            return div_book_list_item;\n        } else {\n            let div_book_list_item = document.createElement('div');\n            return div_book_list_item;\n        }\n    } else {\n        let div_book_list_item = document.createElement('div');\n        return div_book_list_item;\n    }\n};\n\nconst ReplaceCDATA = (str) => {\n    return (str.replace(\"<![CDATA[\", \"\").replace(\"]]>\", \"\"));\n};\n\nconst PaginationClick = (ssr, res_id, page, pagination, serverapi, total) => {\n    let book_search_list = document.getElementById(\"book-search-list\");\n    book_search_list.innerHTML = '';\n    // http://gate22d-m1c.studentlibrary.ru/db?SSr=07E8061B7A28&cmd=more&guide=sengine&res_id=0&from=11\n    const searchURL = serverapi + 'db?SSr=' + ssr + '&cmd=more&guide=sengine&res_id=' + res_id + '&from=' + ((page - 1) * pagination);\n    let xmlHttp = new XMLHttpRequest();\n    // window.console.log(searchURL);\n    xmlHttp.open(\"GET\", searchURL, false); // false for synchronous request\n    xmlHttp.send(null);\n    document.getElementById('book-pagination').setAttribute('page', page);\n    BuildBooksList(serverapi, ssr, xmlHttp.responseText, pagination, serverapi, total, res_id);\n};\n\nconst BuildBookPagination = (res_id, ssr, pagination, total, page = 1, serverapi) => {\n    const pageCount = Math.ceil(total / pagination);\n    let nav_bar = document.createElement('div');\n    nav_bar.id = 'book_nav_bar';\n    nav_bar.classList.add('book_nav_bar');\n    nav_bar.classList.add('pagination');\n    nav_bar.classList.add('pagination-centered');\n    nav_bar.classList.add('justify-content-center');\n    let nav_bar_ul = document.createElement('ui');\n    nav_bar_ul.classList.add('pagination');\n    nav_bar_ul.setAttribute('data-page-size', 20);\n    if (pageCount > 1) {\n        // кнопка назад\n        if (page > 1) {\n            let previous_page = document.createElement('li');\n            previous_page.classList.add('page-item');\n            previous_page.classList.add('page-item-book');\n            previous_page.onclick = function () { PaginationClick(ssr, res_id, Number(page) - 1, pagination, serverapi, total); };\n            let previous_page_a = document.createElement('a');\n            previous_page_a.classList.add('page-link');\n            previous_page_a.setAttribute('page', Number(page) - 1);\n            previous_page_a.innerHTML = '<span aria-hidden=\"true\">«</span>';\n            previous_page.appendChild(previous_page_a);\n            nav_bar_ul.appendChild(previous_page);\n        }\n        // кнопка страница 1\n        let first_page = document.createElement('li');\n        first_page.classList.add('page-item');\n        first_page.classList.add('page-item-book');\n        if (page == 1) {\n            first_page.classList.add('active');\n        }\n        first_page.onclick = function () { PaginationClick(ssr, res_id, 1, pagination, serverapi, total); };\n        let first_page_a = document.createElement('a');\n        first_page_a.classList.add('page-link');\n        first_page_a.setAttribute('page', 1);\n        first_page_a.innerHTML = '<span aria-hidden=\"true\">1</span>';\n        first_page.appendChild(first_page_a);\n        nav_bar_ul.appendChild(first_page);\n        // текушая ...\n        if (page > 3) {\n            let previous_one_page_space = document.createElement('li');\n            previous_one_page_space.classList.add('page-item');\n            previous_one_page_space.classList.add('disabled');\n            previous_one_page_space.classList.add('page-item-book');\n            let previous_one_page_space_a = document.createElement('a');\n            previous_one_page_space_a.classList.add('page-link');\n            previous_one_page_space_a.innerHTML = '<span aria-hidden=\"true\">...</span>';\n            previous_one_page_space.appendChild(previous_one_page_space_a);\n            nav_bar_ul.appendChild(previous_one_page_space);\n        }\n        // текушая страница - 1\n        if (page > 2) {\n            let previous_one_page = document.createElement('li');\n            previous_one_page.classList.add('page-item');\n            previous_one_page.classList.add('page-item-book');\n            previous_one_page.onclick = function () { PaginationClick(ssr, res_id, Number(page) - 1, pagination, serverapi, total); };\n            let previous_one_page_a = document.createElement('a');\n            previous_one_page_a.classList.add('page-link');\n            previous_one_page_a.setAttribute('page', Number(page) - 1);\n            previous_one_page_a.innerHTML = '<span aria-hidden=\"true\">' + (Number(page) - 1) + '</span>';\n            previous_one_page.appendChild(previous_one_page_a);\n            nav_bar_ul.appendChild(previous_one_page);\n        }\n        // текушая страница\n        if (page > 1 && page < (Number(pageCount))) {\n            let Current_one_page = document.createElement('li');\n            Current_one_page.classList.add('page-item');\n            Current_one_page.classList.add('page-item-book');\n            Current_one_page.classList.add('active');\n            let Current_one_page_a = document.createElement('a');\n            Current_one_page_a.classList.add('page-link');\n            Current_one_page_a.innerHTML = '<span aria-hidden=\"true\">' + Number(page) + '</span>';\n            Current_one_page.appendChild(Current_one_page_a);\n            nav_bar_ul.appendChild(Current_one_page);\n        }\n        // текушая страница + 1\n        if (page < (Number(pageCount) - 1)) {\n            let next_one_page = document.createElement('li');\n            next_one_page.classList.add('page-item');\n            next_one_page.classList.add('page-item-book');\n            next_one_page.onclick = function () { PaginationClick(ssr, res_id, Number(page) + 1, pagination, serverapi, total); };\n            let next_one_page_a = document.createElement('a');\n            next_one_page_a.classList.add('page-link');\n            next_one_page_a.setAttribute('page', Number(page) + 1);\n            next_one_page_a.innerHTML = '<span aria-hidden=\"true\">' + (Number(page) + 1) + '</span>';\n            next_one_page.appendChild(next_one_page_a);\n            nav_bar_ul.appendChild(next_one_page);\n        }\n        // текушая ...\n        if (page < (Number(pageCount) - 2)) {\n            let next_one_page_space = document.createElement('li');\n            next_one_page_space.classList.add('page-item');\n            next_one_page_space.classList.add('disabled');\n            next_one_page_space.classList.add('page-item-book');\n            let next_one_page_space_a = document.createElement('a');\n            next_one_page_space_a.classList.add('page-link');\n            next_one_page_space_a.innerHTML = '<span aria-hidden=\"true\">...</span>';\n            next_one_page_space.appendChild(next_one_page_space_a);\n            nav_bar_ul.appendChild(next_one_page_space);\n        }\n        // кнопка страница last\n        let last_page = document.createElement('li');\n        last_page.classList.add('page-item');\n        last_page.classList.add('page-item-book');\n        last_page.onclick = function () { PaginationClick(ssr, res_id, pageCount, pagination, serverapi, total); };\n        if (page == pageCount) {\n            last_page.classList.add('active');\n        }\n        let last_page_a = document.createElement('a');\n        last_page_a.classList.add('page-link');\n        last_page_a.setAttribute('page', pageCount);\n        last_page_a.innerHTML = '<span aria-hidden=\"true\">' + pageCount + '</span>';\n        last_page.appendChild(last_page_a);\n        nav_bar_ul.appendChild(last_page);\n        // кнопка вперед\n        if (page < pageCount) {\n            let next_page = document.createElement('li');\n            next_page.classList.add('page-item');\n            next_page.classList.add('page-item-book');\n            next_page.onclick = function () { PaginationClick(ssr, res_id, Number(page) + 1, pagination, serverapi, total); };\n            let next_page_a = document.createElement('a');\n            next_page_a.classList.add('page-link');\n            last_page_a.setAttribute('page', Number(page) + 1);\n            next_page_a.innerHTML = '<span aria-hidden=\"true\">»</span>';\n            next_page.appendChild(next_page_a);\n            nav_bar_ul.appendChild(next_page);\n        }\n    }\n    document.getElementById('book-pagination').setAttribute('page', page);\n    nav_bar.appendChild(nav_bar_ul);\n    return nav_bar;\n};\n\nconst GetBookIdbyDocId = (server, ssr, BookID) => {\n    let master_book_data_URL = server + 'db?SSr=' + ssr + '&guide=doc&cmd=data&id=' + BookID.split('/')[1] + '&tag=master_book_data';\n    let xmlHttp = new XMLHttpRequest();\n    // window.console.log(master_book_data_URL);\n    xmlHttp.open(\"GET\", master_book_data_URL, false); // false for synchronous request\n    xmlHttp.send(null);\n    let master_book_data = convertStringToXML(xmlHttp.responseText);\n    let BookData = master_book_data.getElementsByTagName('book');\n    if (BookData.length > 0) {\n        return BookData[0].getAttribute('id');\n    } else {\n        return null;\n    }\n};\n\nconst GetBookData = (server, ssr, BookID) => {\n    let GetBookDataURL = server + 'db?SSr=' + ssr + '&guide=' + BookID.split('/')[0] + '&cmd=data&id=' + BookID.split('/')[1] + '&img_src_form=b64';\n    let xmlHttp = new XMLHttpRequest();\n    // window.console.log(GetBookDataURL);\n    xmlHttp.open(\"GET\", GetBookDataURL, false); // false for synchronous request\n    xmlHttp.send(null);\n    let BookData = convertStringToXML(xmlHttp.responseText);\n    let meta = BookData.getElementsByTagName('title');\n    if (meta.length > 0) {\n        return true;\n    } else {\n        return false;\n    }\n};"],"names":["serverapi","kits_select","div_select","headerContent","search_button","add_button","search_bar","lang","on","dialogDom","document","getElementsByClassName","i","length","getAttribute","remove","ssr","this","content","Y","Node","create","search_form","one","search_form_filter","book_button","kitsSelect","kitsSelectOne","kitsURL","kitsHttp","XMLHttpRequest","open","send","kitsArray","convertStringToXML","responseText","getElementsByTagName","divSelect","divSelectOne","option","createElement","value","KitDataList","GetKitData","divArray","j","divData","GetDivFullName","text","appendChild","innerHTML","addkit","getElementById","dialogRef","dialog","destroy","window","console","log","input_book_search","button_book_search","search_input","searchURL","xmlHttp","BuildBooksList","addbook","BookData","querySelector","selectKit","config","bodyContent","additionalBaseClass","draggable","modal","closeButton","width","M","core","dialogue","show","id_error_booke","style","display","book_id_text","indexOf","BookID","FainfBookId","GetBookData","str","text_s","test_f","new_text_s","new_text_f","substring","cardclick","book_id","unclickRadio","removeActive","makeActive","clickRadio","prop","inputElement","removeClass","element","addClass","xmlString","DOMParser","parseFromString","server","divURL","divID","page","leng","divDataURL","full_name_list","divName_stringlist","pagination","book_total","res_id","book_search_list","book_pagination","xmlDoc","bookList","split","Book","BuildBook","BuildDoc","navBar","BuildBookPagination","notFaund_div","notFaund_p","innerText","GetBookDataURL","meta","div_book_list_item","setAttribute","ReplaceCDATA","querySelectorAll","onclick","NewBookID","GetBookIdbyDocId","book_list_item","replace","PaginationClick","total","pageCount","Math","ceil","nav_bar","id","classList","add","nav_bar_ul","previous_page","Number","previous_page_a","first_page","first_page_a","previous_one_page_space","previous_one_page_space_a","previous_one_page","previous_one_page_a","Current_one_page","Current_one_page_a","next_one_page","next_one_page_a","next_one_page_space","next_one_page_space_a","last_page","last_page_a","next_page","next_page_a","master_book_data_URL"],"mappings":"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"}